{% assign brands = "" | split: "," %}
{% assign models = "" | split: "," %}
{% assign years = "" | split: "," %}

{% assign trapo_classic_collection = collections['trapo-classic'] %}

{% if trapo_classic_collection %}
  {% for product in trapo_classic_collection.products %}
    {% for tag in product.tags %}
      {% if tag contains 'brand:' %}
        {% assign brand = tag | remove: 'brand:' | strip %}
        {% unless brands contains brand %}
          {% assign brands = brands | concat: brand | split: "," %}
        {% endunless %}
      {% elsif tag contains 'model:' %}
        {% assign model = tag | remove: 'model:' | strip %}
        {% unless models contains model %}
          {% assign models = models | concat: model | split: "," %}
        {% endunless %}
      {% elsif tag contains 'year:' %}
        {% assign year = tag | remove: 'year:' | strip %}
        {% unless years contains year %}
          {% assign years = years | concat: year | split: "," %}
        {% endunless %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% else %}
  <p>Collection 'Trapo Classic' not found.</p>
{% endif %}

<select id="brand-dropdown">
  <option value="">Select Brand</option>
  {% for brand in brands %}
    {% if brand != "" %}
      <option value="{{ brand }}">{{ brand }}</option>
    {% endif %}
  {% endfor %}
</select>

<select id="model-dropdown">
  <option value="">Select Model</option>
  {% for model in models %}
    {% if model != "" %}
      <option value="{{ model }}">{{ model }}</option>
    {% endif %}
  {% endfor %}
</select>

<select id="year-dropdown">
  <option value="">Select Year</option>
  {% for year in years %}
    {% if year != "" %}
      <option value="{{ year }}">{{ year }}</option>
    {% endif %}
  {% endfor %}
</select>