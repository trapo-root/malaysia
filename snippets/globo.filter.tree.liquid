{%- comment -%}Do not edit this file{%- endcomment -%}
{% raw %}

    {% assign numberSelectedFilters = 0 %}
    {% assign pageType = {% endraw %}
{{- request.page_type | json -}}
{% raw %} %}

    {% unless settings.layout == 2 %}
    <div class="gf-filter-header">
    <div class="gf-filter-heading">{{translation.filter.filter_by | default: "Filter by"}}</div>
    <span onclick="globofilter.toggleCanvas()" class="gf-close-canvas"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.414 10l6.293-6.293a1 1 0 10-1.414-1.414L10 8.586 3.707 2.293a1 1 0 00-1.414 1.414L8.586 10l-6.293 6.293a1 1 0 101.414 1.414L10 11.414l6.293 6.293A.998.998 0 0018 17a.999.999 0 00-.293-.707L11.414 10z" fill="#5C5F62"></path></svg></span>
    </div>
    {% endunless %}

    {% if settings.layout == 2 %}
    {% if settings.enableCollectionSearch and pageType != 'search' %}
    <form class="gf-controls-search-form hidden-sm">
    <input value="{{terms | escape}}" onkeyup="this.setAttribute('value', this.value); searchProducts(this.value);" name="q" placeholder="{{translation.product.search | default: "Search products"}}" aria-label="{{translation.product.search | default: "Search products"}}" autocomplete="off" class="gf-controls-search-input"/>
    <button onclick="clearSearchProducts()" type="button" class="gf-controls-clear-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.414 10l6.293-6.293a1 1 0 10-1.414-1.414L10 8.586 3.707 2.293a1 1 0 00-1.414 1.414L8.586 10l-6.293 6.293a1 1 0 101.414 1.414L10 11.414l6.293 6.293A.998.998 0 0018 17a.999.999 0 00-.293-.707L11.414 10z" fill="#5C5F62"/></svg>
    </button>
    <button type="button" class="gf-controls-search-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 8c0-3.309 2.691-6 6-6s6 2.691 6 6-2.691 6-6 6-6-2.691-6-6zm17.707 10.293l-5.395-5.396A7.946 7.946 0 0016 8c0-4.411-3.589-8-8-8S0 3.589 0 8s3.589 8 8 8a7.954 7.954 0 004.897-1.688l5.396 5.395A.998.998 0 0020 19a1 1 0 00-.293-.707z" fill="#3d4246"/></svg>
    </button>
    </form>
    {% endif %}
    <div class="gf-filter-contents">
    {% if filters %}
        <div class="gf-filter-contents-inner">
        {% for filter in filters %}
            {% assign filterLabel = filter.label | escape %}
            {% if translation.labels and translation.labels[filter.id] %}
            {% assign filterLabel = translation.labels[filter.id] | escape %}
            {% endif %}
            <div data-filter-type="{{filter.attribute | replace: 'option:', ''}}" data-filter-id="{{filter.id}}" class="gf-option-block {{filter.class}}{% if filter.is_collapse %} is-collapsed{% endif %}">
            <div class="gf-block-title">
                <div class="h3">
                <span>{{filterLabel}}</span>
                {% if filter.help %}
                <span class="gf-tooltip-trigger" aria-hidden="true">?</span>
                <div class="gf-tooltip"><div class="gf-tooltip-content">{{filter.help | newline_to_br}}</div></div>
                {% endif %}
                </div>
                {% if filter.is_selected %}
                <a class="gf-clear" onclick="removeFilter({{filter.id}})">{{ translation.filter.clear | default: "Clear"}}</a>
                {% endif %}
            </div>
            <div class="gf-block-content">
                {% if filter.searchable and filter.style != 'Slider' %}<input type="text" placeholder="{{ translation.filter.search | default: "Search options"}}" value="" onkeyup="globofilter.searchValues(this);" class="gf-search">{% endif %}
                {% assign values_count = 0 %}
                {% if filter.values %}{% assign values_count = filter.values | size %}{% endif %}
                <div class="gf-scroll {% if filter.style != 'Select' and filter.style != 'Slider' and values_count > 10 %}gf-block-scroll{% endif %}">
                {% if filter.style == 'Slider' %}
                    <div class="gf-range-inputs">
                    <input 
                        class="gf-range-min" 
                        id="min-{{filter.id}}" 
                        data-value="{{filter.values.min}}" 
                        data-min-value="{% if filter.attribute == 'Price' %}{{filter.ranges.min | money_without_format}}{% else %}{{filter.ranges.min}}{% endif %}" 
                        value="{% if filter.attribute == 'Price' %}{{filter.values.min | money_without_format}}{% else %}{{filter.values.min}}{% endif %}" 
                        type="text" 
                        aria-label="Min value"
                    />
                    <span class="gf-range-split"> - </span>
                    <input
                        class="gf-range-max"
                        id="max-{{filter.id}}"
                        data-value="{{filter.values.max}}"
                        data-max-value="{% if filter.attribute == 'Price' %}{{filter.ranges.max | money_without_format}}{% else %}{{filter.ranges.max}}{% endif %}" 
                        value="{% if filter.attribute == 'Price' %}{{filter.values.max | money_without_format}}{% else %}{{filter.values.max}}{% endif %}" 
                        type="text" 
                        aria-label="Max value"
                    />
                    </div>
                    <div class="gf-range-slider" data-min="{{filter.ranges.min}}" data-max="{{filter.ranges.max}}" data-id="{{filter.id}}" aria-label="{% if translation.labels and translation.labels[filter.id] %}{{translation.labels[filter.id]}}{% else %}{{filter.label}}{% endif %}" data-attribute="{{filter.id}}" id="slider-{{filter.id}}"></div>
                    {% if filter.is_selected %}{% assign numberSelectedFilters = numberSelectedFilters | plus: 1 %}{% endif %}
                {% elsif filter.style == 'Select' %}
                    <select onchange="toggleRadioFilter({{filter.id}}, this.value)">
                    <option value="">{{ translation.filter.choose_values | default: "Choose values"}}</option>
                    {%- for value in filter.values -%}
                    {%- assign value_label = value.label | escape -%}
                    <option {% if value.selected %}selected="selected"{% endif %} value="{{value.value | escape}}">{{value_label}} {% if settings.showCount %}({{value.count}}){% endif %}</option>
                    {%- endfor -%}
                    </select>
                {% else %}
                <ul class="gf-option-box">
                    {% if filter.attribute == 'Collection' and filter.tree %}
                    {% for value in filter.tree %}
                        <li data-collection="{{value.value}}"{% if value.is_collapse %} class="is-collapsed"{% endif %}>
                        <div>
                            {% assign value_label = value.label | escape %}
                            {% if filter.style == 'Checkbox' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                                <span class="gf-Checkbox"></span>
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% elsif filter.style == 'Radio' %}
                            <button type="button" role="radio"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                                <span class="gf-RadioButton"></span>
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% elsif filter.style == 'Box - Rectangle' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% elsif filter.style == 'Collection' %}
                            <button type="button" role="link"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.handle | escape}}" title="{{value_label}}">
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% endif %}
                            {% if value.children %}<span></span>{% endif %}
                        </div>
                        {% if value.children %}
                            <ul{% if value.is_collapse %} style="display:none"{% endif %}>
                            {% for child in value.children %}
                                {% assign value_label = child.label | escape %}
                                <li data-collection="{{child.value}}"{% if child.is_collapse %} class="is-collapsed"{% endif %}>
                                <div>
                                    {% if filter.style == 'Checkbox' %}
                                    <button type="button" role="checkbox"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.value | escape}}" title="{{value_label}}">
                                        <span class="gf-Checkbox"></span>
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% elsif filter.style == 'Radio' %}
                                    <button type="button" role="radio"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.value | escape}}" title="{{value_label}}">
                                        <span class="gf-RadioButton"></span>
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% elsif filter.style == 'Box - Rectangle' %}
                                    <button type="button" role="checkbox"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.value | escape}}" title="{{value_label}}">
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% elsif filter.style == 'Collection' %}
                                    <button type="button" role="link"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.handle | escape}}" title="{{value_label}}">
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% endif %}
                                    {% if child.children %}<span></span>{% endif %}
                                </div>
                                {% if child.children %}
                                    <ul{% if child.is_collapse %} style="display:none"{% endif %}>
                                    {% for gchild in child.children %}
                                        {% assign value_label = gchild.label | escape %}
                                        <li data-collection="{{gchild.value}}"{% if gchild.is_collapse %} class="is-collapsed"{% endif %}>
                                        <div>
                                            {% if filter.style == 'Checkbox' %}
                                            <button type="button" role="checkbox"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.value | escape}}" title="{{value_label}}">
                                                <span class="gf-Checkbox"></span>
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% elsif filter.style == 'Radio' %}
                                            <button type="button" role="radio"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.value | escape}}" title="{{value_label}}">
                                                <span class="gf-RadioButton"></span>
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% elsif filter.style == 'Box - Rectangle' %}
                                            <button type="button" role="checkbox"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.value | escape}}" title="{{value_label}}">
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% elsif filter.style == 'Collection' %}
                                            <button type="button" role="link"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.handle | escape}}" title="{{value_label}}">
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% endif %}
                                            {% if gchild.children %}<span></span>{% endif %}
                                        </div>
                                        {% if gchild.children %}
                                            <ul{% if gchild.is_collapse %} style="display:none"{% endif %}>
                                            {% for ggchild in gchild.children %}
                                                {% assign value_label = ggchild.label | escape %}
                                                <li data-collection="{{ggchild.value}}"{% if ggchild.is_collapse %} class="is-collapsed"{% endif %}>
                                                <div>
                                                    {% if filter.style == 'Checkbox' %}
                                                    <button type="button" role="checkbox"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.value | escape}}" title="{{value_label}}">
                                                        <span class="gf-Checkbox"></span>
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% elsif filter.style == 'Radio' %}
                                                    <button type="button" role="radio"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.value | escape}}" title="{{value_label}}">
                                                        <span class="gf-RadioButton"></span>
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% elsif filter.style == 'Box - Rectangle' %}
                                                    <button type="button" role="checkbox"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.value | escape}}" title="{{value_label}}">
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% elsif filter.style == 'Collection' %}
                                                    <button type="button" role="link"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.handle | escape}}" title="{{value_label}}">
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% endif %}
                                                </div>
                                                </li>
                                            {% endfor %}
                                            </ul>
                                        {% endif %}
                                        </li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                                </li>
                            {% endfor %}
                            </ul>
                        {% endif %}
                        </li>
                    {% endfor %}
                    {% else %}
                    {% for value in filter.values %}
                        {% assign value_label = value.label | escape %}
                        {% if filter.is_selected %}{% assign numberSelectedFilters = numberSelectedFilters | plus: 1 %}{% endif %}
                        <li{% if filter.style contains 'Box - Rectangle' %} class="gf-box-rectangle"{% endif %}>
                        {% if filter.style == 'Checkbox' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-Checkbox"></span>
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Radio' %}
                            <button type="button" role="radio"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-RadioButton"></span>
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Box - Rectangle' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Collection' %}
                            <button type="button" role="link"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.handle | escape}}" title="{{value_label}}">
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Rating' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-label gf-stars">
                                {% for star in (1..5) %}
                                {% if star <= value.value %}
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                                {% else %}
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.71 15.116l3.357-1.658.892.452 2.327 1.178-.56-3.912.708-.707 1.29-1.29-3.235-.576-.445-.915-1.059-2.176L8.4 8.683l-1.005.168-2.098.35 1.975 1.975-.141.99-.422 2.95zM5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                                {% endif %}
                                {% endfor %}
                            </span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style contains 'Swatch' %}
                            {% assign attribute = filter.attribute | replace: 'option:', '' | downcase %}
                            {% assign value_handle = value.value | downcase %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}"  title="{{value_label}}">
                            {% if swatches[attribute] and swatches[attribute][value_handle] %}
                                {% if swatches[attribute][value_handle].mode == 1 %}
                                <span class="gf-option-one-color" style="background-color:{{ swatches[attribute][value_handle].color_1 }}"></span>{% if filter.style contains 'Swatch - Text' %} <span class="gf-label">{{value_label}}</span>{% endif %}
                                {% elsif swatches[attribute][value_handle].mode == 2 %}
                                <span class="gf-option-two-color" style="background-color:{{ swatches[attribute][value_handle].color_1 }}"><span class="bottom-color" style="border-bottom-color:{{ swatches[attribute][value_handle].color_2 }}"></span></span>{% if filter.style contains 'Swatch - Text' %} <span class="gf-label">{{value_label}}</span>{% endif %}
                                {% elsif swatches[attribute][value_handle].mode == 3 %}
                                <span class="gf-swatch-image" style="background-image: url('{{ swatches[attribute][value_handle].image }}');background-color: {{ value.value | escape }}"></span>{% if filter.style contains 'Swatch - Text' %} <span class="gf-label">{{value_label}}</span>{% endif %}
                                {% endif %}
                            {% else %}
                                {% assign value_handle = value.value | handle %}
                                {% assign value_jpg    = value_handle | append: '.jpg' %}
                                {% assign value_png    = value_handle | append: '.png' %}
                                {% assign value_jpeg   = value_handle | append: '.jpeg' %}
                                {% assign has_swatch   = false %}
                                {% capture background_image_css %}
                                {% if images contains value_jpg %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value_jpg | asset_img_url: '50x' | prepend: 'https:' }}');
                                {% elsif images contains value_png %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value_png | asset_img_url: '50x' | prepend: 'https:' }}');
                                {% elsif images contains value_jpeg %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value_jpeg | asset_img_url: '50x' | prepend: 'https:' }}');
                                {% elsif value.value contains 'https:' or value.value contains 'http:' %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value.value }}');  
                                {% endif %}
                                background-color: {{ value.value | replace:"\\", "\\\\" | replace:"\'", "\\\'" | escape }};
                                {% endcapture %}
                                {% if has_swatch %}
                                <span class="gf-swatch-image" style="{{background_image_css}}"></span>
                                {% if filter.style contains 'Swatch - Text' %} 
                                    <span class="gf-label">{{value_label}}</span>
                                {% endif %}
                                {% elsif value.label contains "#" and value.label.size == 7 %}
                                <span class="gf-option-one-color" style="background-color:{{ value.label }}"></span>
                                {% else %}
                                <span class="gf-option-value">{{value_label}}</span>
                                {% endif %}
                            {% endif %}
                            </button>
                        {% endif %}
                        </li>
                    {% endfor %}
                    {% if filter.style == 'Swatch' %}
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    {% endif %}
                    {% endif %}
                </ul>
                {% endif %}
                </div>
            </div>
            </div>
        {% endfor %}
        </div>
    {% endif %}

    {% if settings.sorts %}
        {% assign relevance = '' %}
        {% if pageType == 'search' %}
        {% assign relevance = 'relevance,' %}
        {% endif %}
        {% if terms %}{% assign relevance = 'relevance,' %}{% endif %}

        {% assign allSorts = settings.sorts | join: "," %}
        {% assign allSorts = allSorts | prepend: relevance | append: "," | append: sort_by | append: ',{% endraw %}
{{- collection.default_sort_by -}}
{% raw %}' | replace: "featured", "manual" | split: "," | uniq %}

        {% capture selectedSortText %}
        {% if sort_by =='best-selling' %}
            {{translation.sort.best_selling | default: "Best Selling"}}
        {% elsif sort_by == 'manual' or sort_by == 'featured' %}
            {{translation.sort.manually | default: "Featured"}}
        {% elsif sort_by == 'relevance' %}
            {{translation.sort.relevance | default: "Relevance"}}
        {% elsif sort_by == 'stock-descending' %}
            {{translation.sort.availability_in_stock_first | default: "Availability"}}
        {% elsif sort_by == 'title-ascending' %}
            {{translation.sort.alphabetically_a_z | default: "Alphabetically, A-Z"}}
        {% elsif sort_by == 'title-descending' %}
            {{translation.sort.alphabetically_z_a | default: "Alphabetically, Z-A"}}
        {% elsif sort_by == 'price-ascending' %}
            {{translation.sort.price_low_to_high | default: "Price, low to high"}}
        {% elsif sort_by == 'price-descending' %}
            {{translation.sort.price_high_to_low | default: "Price, high to low"}}
        {% elsif sort_by == 'created-descending' %}
            {{translation.sort.date_new_to_old | default: "Date, new to old"}}
        {% elsif sort_by == 'created-ascending' %}
            {{translation.sort.date_old_to_new | default: "Date, old to new"}}
        {% elsif sort_by == 'sale-descending' %}
            {{translation.sort.sale_off | default: "% Sale off"}}
        {% elsif translation.sort[sort_by] %}
            {{translation.sort[sort_by]}}
        {% else %}
            {{sort_by | remove_first: "mf-custom-" | replace: "-", " " | capitalize}}
        {% endif %}
        {% endcapture %}

        <div class="sort-by">
        <label for="globo-dropdown-sort_options" class="sort-by-toggle" role="button" aria-expanded="false">{{translation.sort.sort_by | default: "Sort by"}}: <span>{{selectedSortText}}</span></label>
        <div id="globo-dropdown-sort_options" class="globo-dropdown-custom__options">
            {% for sort in allSorts %}
            {%- if sort == 'best-selling' -%}
                <span data-sort="best-selling" onclick="changeSortBy('best-selling');">{{translation.sort.best_selling | default: "Best Selling"}}</span>
            {%- elsif sort == 'manual' -%}
                <span data-sort="manual" onclick="changeSortBy('manual');">{{translation.sort.manually | default: "Featured"}}</span>
            {%- elsif sort == 'featured' -%}
                <span data-sort="manual" onclick="changeSortBy('manual');">{{translation.sort.manually | default: "Featured"}}</span>
            {%- elsif sort == 'stock-descending' -%}
                <span data-sort="stock-descending" onclick="changeSortBy('stock-descending');">{{translation.sort.availability_in_stock_first | default: "Availability"}}</span>
            {%- elsif sort == 'relevance' -%}
                <span data-sort="relevance" onclick="changeSortBy('relevance');">{{translation.sort.relevance | default: "Relevance"}}</span>
            {%- elsif sort == 'title-ascending' -%}
                <span data-sort="title-ascending" onclick="changeSortBy('title-ascending');">{{translation.sort.alphabetically_a_z | default: "Alphabetically, A-Z"}}</span>
            {%- elsif sort == 'title-descending' -%}
                <span data-sort="title-descending" onclick="changeSortBy('title-descending');">{{translation.sort.alphabetically_z_a | default: "Alphabetically, Z-A"}}</span>
            {%- elsif sort == 'price-ascending' -%}
                <span data-sort="price-ascending" onclick="changeSortBy('price-ascending');">{{translation.sort.price_low_to_high | default: "Price, low to high"}}</span>
            {%- elsif sort == 'price-descending' -%}
                <span data-sort="price-descending" onclick="changeSortBy('price-descending');">{{translation.sort.price_high_to_low | default: "Price, high to low"}}</span>
            {%- elsif sort == 'created-descending' -%}
                <span data-sort="created-descending" onclick="changeSortBy('created-descending');">{{translation.sort.date_new_to_old | default: "Date, new to old"}}</span>
            {%- elsif sort == 'created-ascending' -%}
                <span data-sort="created-ascending" onclick="changeSortBy('created-ascending');">{{translation.sort.date_old_to_new | default: "Date, old to new"}}</span>
            {%- elsif sort == 'sale-descending' -%}
                <span data-sort="sale-descending" onclick="changeSortBy('sale-descending');">{{translation.sort.sale_off | default: "% Sale off"}}</span>
            {%- else -%}
                <span data-sort="{{sort}}" onclick="changeSortBy('{{sort}}');">{% if translation.sort[sort] %}{{translation.sort[sort]}}{% else %}{{sort | remove_first: "mf-custom-" | replace: "-", " " | capitalize}}{% endif %}</span>
            {%- endif -%}
            {%- endfor -%}
        </div>
        </div>
    {% endif %}
    </div>

    {% if settings.showRefine %}
    <div class="globo-selected-items-wrapper">
    {% if selectedItems %}
    <ul class="globo-selected-items">
        {% if numberSelectedFilters > 1 %}
        <li class="selected-item gf-option-label">
        <a onclick="clearAllFilter()" class="clear-refinements">{{ translation.filter.clear_all | default: "Clear all"}}</a>
        </li>
        {% endif %}
        {% for selectedItem in selectedItems %}
        {% assign filterLabel = selectedItem.label | escape %}
        {% if translation.labels and translation.labels[selectedItem.id] %}
        {% assign filterLabel = translation.labels[selectedItem.id] | escape %}
        {% endif %}
        {% if selectedItem.style == 'Slider' %}
            <li class="selected-item gf-option-label">
            <a onclick="removeFilter({{selectedItem.id}})">
                <span class="selected-item">
                <span class="hidden-sm">{{filterLabel}}</span>
                <strong>
                    {% if selectedItem.attribute == 'Price' %}
                    <span class="money">{{selectedItem.values.min | money}}</span> - <span class="money">{{selectedItem.values.max | money}}</span>
                    {% elsif selectedItem.attribute == 'Percent Sale' %}
                    {{selectedItem.values.min}}% - {{selectedItem.values.max}}%
                    {% else %}
                    {{selectedItem.values.min}} - {{selectedItem.values.max}}
                    {% endif %}
                </strong>
                </span>
                <span class="gf-clear"></span>
            </a>
            </li>
        {% else %}
            {% for value in selectedItem.values %}
            {% assign value_label = value.label | escape %}
            <li class="selected-item gf-option-label">
                <a onclick="removeFilterValue({{selectedItem.id}},'{{value.value | replace:"\\", "\\\\" | replace:"\'", "\\\'" | replace:'\"', '\\\"' | escape}}')">
                <span class="selected-item">
                    <span class="hidden-sm">{{filterLabel}}</span>
                    <strong>
                    {% if style == 'Rating' %}
                        <span class="gf-label gf-stars">
                        {% for star in (1..5) %}
                            {% if star <= value.value %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                            {% else %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.71 15.116l3.357-1.658.892.452 2.327 1.178-.56-3.912.708-.707 1.29-1.29-3.235-.576-.445-.915-1.059-2.176L8.4 8.683l-1.005.168-2.098.35 1.975 1.975-.141.99-.422 2.95zM5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                            {% endif %}
                        {% endfor %}
                        </span>
                    {% elsif attribute contains 'metafield:' and value.value contains 'https:' %}
                        <span class="gf-swatch-image" style="background-image: url('{{ value.value }}')"></span>
                    {% elsif value.label contains "#" and value.label.size == 7 %}
                        <span class="gf-option-one-color" style="background-color:{{ value.label }}"></span>
                    {% else %}
                        <span class="gf-label">{{value_label}}</span>
                    {% endif %}
                    </strong>
                </span>
                <span class="gf-clear"></span>
                </a>
            </li>
            {% endfor %}
        {% endif %}
        {% endfor %}
    </ul>
    {% endif %}
    </div>
    {% endif %}

    {% else %}

    {% if settings.showRefine %}
    <div class="globo-selected-items-wrapper">
    {% if has_filter %}
    <div class="gf-block-title hidden-sm">
        <div class="h3"><span>{{ translation.filter.filter_by | default: "Filter by"}}</span></div>
        <a onclick="clearAllFilter()" class="gf-refine-toggle hidden-sm">{{ translation.filter.clear_all | default: "Clear all"}}</a>
    </div>
    <div class="gf-block-content globo-selected-items">
        <button onclick="clearAllFilter()" class="clear-refinements visible-sm">{{ translation.filter.clear_all | default: "Clear all"}}</button>
        {% if selectedItems %}
        {% for selectedItem in selectedItems %}
            {% assign filterLabel = selectedItem.label | escape %}
            {% if translation.labels and translation.labels[selectedItem.id] %}
            {% assign filterLabel = translation.labels[selectedItem.id] | escape %}
            {% endif %}
            {% if selectedItem.style == 'Slider' %}
            <div class="selected-item gf-option-label">
                <a onclick="removeFilter({{selectedItem.id}})">
                <span class="selected-item">
                    <span class="hidden-sm">{{filterLabel}}</span>
                    <strong>
                    {% if selectedItem.attribute == 'Price' %}
                        <span class="money">{{selectedItem.values.min | money}}</span> - <span class="money">{{selectedItem.values.max | money}}</span>
                    {% elsif selectedItem.attribute == 'Percent Sale' %}
                        {{selectedItem.values.min}}% - {{selectedItem.values.max}}%
                    {% else %}
                        {{selectedItem.values.min}} - {{selectedItem.values.max}}
                    {% endif %}
                    </strong>
                </span>
                <span class="gf-clear"></span>
                </a>
            </div>
            {% else %}
            {% for value in selectedItem.values %}
                {% assign value_label = value.label | escape %}
                <div class="selected-item gf-option-label">
                <a onclick="removeFilterValue({{selectedItem.id}},'{{value.value | replace:"\\", "\\\\" | replace:"\'", "\\\'" | replace:'\"', '\\\"' | escape}}')">
                    <span class="selected-item">
                    <span class="hidden-sm">{{filterLabel}}</span>
                    <strong>
                        {% if style == 'Rating' %}
                        <span class="gf-label gf-stars">
                            {% for star in (1..5) %}
                            {% if star <= value.value %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                            {% else %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.71 15.116l3.357-1.658.892.452 2.327 1.178-.56-3.912.708-.707 1.29-1.29-3.235-.576-.445-.915-1.059-2.176L8.4 8.683l-1.005.168-2.098.35 1.975 1.975-.141.99-.422 2.95zM5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                            {% endif %}
                            {% endfor %}
                        </span>
                        {% elsif attribute contains 'metafield:' and value.value contains 'https:' %}
                        <span class="gf-swatch-image" style="background-image: url('{{ value.value }}')"></span>
                        {% elsif value.label contains "#" and value.label.size == 7 %}
                        <span class="gf-option-one-color" style="background-color:{{ value.label }}"></span>
                        {% else %}
                        <span class="gf-label">{{value_label}}</span>
                        {% endif %}
                    </strong>
                    </span>
                    <span class="gf-clear"></span>
                </a>
                </div>
            {% endfor %}
            {% endif %}
        {% endfor %}
        {% endif %}
    </div>
    {% endif %}
    </div>
    {% endif %}

    <div class="gf-filter-contents">
    {% if filters %}
        {% for filter in filters %}
        {% assign filterLabel = filter.label | escape %}
        {% if translation.labels and translation.labels[filter.id] %}
        {% assign filterLabel = translation.labels[filter.id] | escape %}
        {% endif %}
        {% if filter.values.size >= 1 or filter.values.first.selected == true or filter.values.first.count != pagination.total or settings.hideOneValue == false %}
        <div data-filter-type="{{filter.attribute | replace: 'option:', ''}}" data-filter-id="{{filter.id}}" class="gf-option-block {{filter.class}}{% if filter.is_collapse %} is-collapsed{% endif %}">
            <div class="gf-block-title">
            <div class="h3">
                <span>{{filterLabel}}</span>
                {% if filter.help %}
                <span class="gf-tooltip-trigger" aria-hidden="true">?</span>
                <div class="gf-tooltip"><div class="gf-tooltip-content" >{{filter.help | newline_to_br}}</div></div>
                {% endif %}
            </div>
            {% if filter.is_selected %}
            <a class="gf-clear" onclick="removeFilter({{filter.id}})">{{ translation.filter.clear | default: "Clear"}}</a>
            {% endif %}
            </div>
            <div class="gf-block-content">
            {% if filter.searchable and filter.style != 'Slider' %}<input type="text" placeholder="{{ translation.filter.search | default: "Search options"}}" value="" onkeyup="globofilter.searchValues(this);" class="gf-search">{% endif %}
            {% assign values_count = 0 %}
            {% if filter.values %}{% assign values_count = filter.values | size %}{% endif %}

            <div class="gf-scroll {% if filter.style != 'Select' and filter.style != 'Slider' and values_count > 10 %}gf-block-scroll{% endif %}">
                {% if filter.style == 'Slider' %}
                <div class="gf-range-inputs">
                    <input 
                    class="gf-range-min" 
                    id="min-{{filter.id}}" 
                    data-value="{{filter.values.min}}" 
                    data-min-value="{% if filter.attribute == 'Price' %}{{filter.ranges.min | money_without_format}}{% else %}{{filter.ranges.min}}{% endif %}" 
                    value="{% if filter.attribute == 'Price' %}{{filter.values.min | money_without_format}}{% else %}{{filter.values.min}}{% endif %}" 
                    type="text" 
                    aria-label="Min value"
                    />
                    <span class="gf-range-split"> - </span>
                    <input
                    class="gf-range-max"
                    id="max-{{filter.id}}"
                    data-value="{{filter.values.max}}"
                    data-max-value="{% if filter.attribute == 'Price' %}{{filter.ranges.max | money_without_format}}{% else %}{{filter.ranges.max}}{% endif %}" 
                    value="{% if filter.attribute == 'Price' %}{{filter.values.max | money_without_format}}{% else %}{{filter.values.max}}{% endif %}" 
                    type="text" 
                    aria-label="Max value"
                    />
                </div>
                <div class="gf-range-slider" data-min="{{filter.ranges.min}}" data-max="{{filter.ranges.max}}" aria-label="{% if translation.labels and translation.labels[filter.id] %}{{translation.labels[filter.id]}}{% else %}{{filter.label}}{% endif %}" data-id="{{filter.id}}" data-attribute="{{filter.id}}" id="slider-{{filter.id}}"></div>
                {% elsif filter.style == 'Select' %}
                <select onchange="toggleRadioFilter({{filter.id}}, this.value)">
                    <option value="">{{ translation.filter.choose_values | default: "Choose values"}}</option>
                    {%- for value in filter.values -%}
                    {%- assign value_label = value.label | escape -%}
                    <option {% if value.selected %}selected="selected"{% endif %} value="{{value.value | escape}}">{{value_label}} {% if settings.showCount %}({{value.count}}){% endif %}</option>
                    {%- endfor -%}
                </select>
                {% else %}
                <ul class="gf-option-box">
                    {% if filter.attribute == 'Collection' and filter.tree %}
                    {% for value in filter.tree %}
                        <li data-collection="{{value.value}}"{% if value.is_collapse %} class="is-collapsed"{% endif %}>
                        <div>
                            {% assign value_label = value.label | escape %}
                            {% if filter.style == 'Checkbox' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                                <span class="gf-Checkbox"></span>
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% elsif filter.style == 'Radio' %}
                            <button type="button" role="radio"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                                <span class="gf-RadioButton"></span>
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% elsif filter.style == 'Box - Rectangle' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% elsif filter.style == 'Collection' %}
                            <button type="button" role="link"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.handle | escape}}" title="{{value_label}}">
                                <span class="gf-label">{{value_label}}</span>
                                {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                            {% endif %}
                            {% if value.children %}<span></span>{% endif %}
                        </div>
                        {% if value.children %}
                            <ul{% if value.is_collapse %} style="display:none"{% endif %}>
                            {% for child in value.children %}
                                {% assign value_label = child.label | escape %}
                                <li data-collection="{{child.value}}"{% if child.is_collapse %} class="is-collapsed"{% endif %}>
                                <div>
                                    {% if filter.style == 'Checkbox' %}
                                    <button type="button" role="checkbox"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.value | escape}}" title="{{value_label}}">
                                        <span class="gf-Checkbox"></span>
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% elsif filter.style == 'Radio' %}
                                    <button type="button" role="radio"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.value | escape}}" title="{{value_label}}">
                                        <span class="gf-RadioButton"></span>
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% elsif filter.style == 'Box - Rectangle' %}
                                    <button type="button" role="checkbox"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.value | escape}}" title="{{value_label}}">
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% elsif filter.style == 'Collection' %}
                                    <button type="button" role="link"{% if child.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{child.handle | escape}}" title="{{value_label}}">
                                        <span class="gf-label">{{value_label}}</span>
                                        {% if settings.showCount %}<span class="gf-count">({{child.count}})</span>{% endif %}
                                    </button>
                                    {% endif %}
                                    {% if child.children %}<span></span>{% endif %}
                                </div>
                                {% if child.children %}
                                    <ul{% if child.is_collapse %} style="display:none"{% endif %}>
                                    {% for gchild in child.children %}
                                        {% assign value_label = gchild.label | escape %}
                                        <li data-collection="{{gchild.value}}"{% if gchild.is_collapse %} class="is-collapsed"{% endif %}>
                                        <div>
                                            {% if filter.style == 'Checkbox' %}
                                            <button type="button" role="checkbox"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.value | escape}}" title="{{value_label}}">
                                                <span class="gf-Checkbox"></span>
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% elsif filter.style == 'Radio' %}
                                            <button type="button" role="radio"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.value | escape}}" title="{{value_label}}">
                                                <span class="gf-RadioButton"></span>
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% elsif filter.style == 'Box - Rectangle' %}
                                            <button type="button" role="checkbox"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.value | escape}}" title="{{value_label}}">
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% elsif filter.style == 'Collection' %}
                                            <button type="button" role="link"{% if gchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{gchild.handle | escape}}" title="{{value_label}}">
                                                <span class="gf-label">{{value_label}}</span>
                                                {% if settings.showCount %}<span class="gf-count">({{gchild.count}})</span>{% endif %}
                                            </button>
                                            {% endif %}
                                            {% if gchild.children %}<span></span>{% endif %}
                                        </div>
                                        {% if gchild.children %}
                                            <ul{% if gchild.is_collapse %} style="display:none"{% endif %}>
                                            {% for ggchild in gchild.children %}
                                                {% assign value_label = ggchild.label | escape %}
                                                <li data-collection="{{ggchild.value}}"{% if ggchild.is_collapse %} class="is-collapsed"{% endif %}>
                                                <div>
                                                    {% if filter.style == 'Checkbox' %}
                                                    <button type="button" role="checkbox"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.value | escape}}" title="{{value_label}}">
                                                        <span class="gf-Checkbox"></span>
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% elsif filter.style == 'Radio' %}
                                                    <button type="button" role="radio"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.value | escape}}" title="{{value_label}}">
                                                        <span class="gf-RadioButton"></span>
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% elsif filter.style == 'Box - Rectangle' %}
                                                    <button type="button" role="checkbox"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.value | escape}}" title="{{value_label}}">
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% elsif filter.style == 'Collection' %}
                                                    <button type="button" role="link"{% if ggchild.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{ggchild.handle | escape}}" title="{{value_label}}">
                                                        <span class="gf-label">{{value_label}}</span>
                                                        {% if settings.showCount %}<span class="gf-count">({{ggchild.count}})</span>{% endif %}
                                                    </button>
                                                    {% endif %}
                                                </div>
                                                </li>
                                            {% endfor %}
                                            </ul>
                                        {% endif %}
                                        </li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                                </li>
                            {% endfor %}
                            </ul>
                        {% endif %}
                        </li>
                    {% endfor %}
                    {% else %}
                    {% for value in filter.values %}
                        {% assign value_label = value.label | escape %}
                        <li{% if filter.style contains 'Box - Rectangle' %} class="gf-box-rectangle"{% endif %}>
                        {% if filter.style == 'Checkbox' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-Checkbox"></span>
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Radio' %}
                            <button type="button" role="radio"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-RadioButton"></span>
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Box - Rectangle' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Collection' %}
                            <button type="button" role="link"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.handle | escape}}" title="{{value_label}}">
                            <span class="gf-label">{{value_label}}</span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style == 'Rating' %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}" title="{{value_label}}">
                            <span class="gf-label gf-stars">
                                {% for star in (1..5) %}
                                {% if star <= value.value %}
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                                {% else %}
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.71 15.116l3.357-1.658.892.452 2.327 1.178-.56-3.912.708-.707 1.29-1.29-3.235-.576-.445-.915-1.059-2.176L8.4 8.683l-1.005.168-2.098.35 1.975 1.975-.141.99-.422 2.95zM5.2 18a.8.8 0 01-.792-.914l.743-5.203-2.917-2.917a.8.8 0 01.434-1.355l4.398-.733 2.218-4.435a.8.8 0 011.435.008l2.123 4.361 4.498.801a.8.8 0 01.425 1.353l-2.917 2.917.744 5.203a.8.8 0 01-1.154.828l-4.382-2.22-4.502 2.223A.792.792 0 015.2 18z" fill="#ff9800"/></svg>
                                {% endif %}
                                {% endfor %}
                            </span>
                            {% if settings.showCount %}<span class="gf-count">({{value.count}})</span>{% endif %}
                            </button>
                        {% elsif filter.style contains 'Swatch' %}
                            {% assign attribute = filter.attribute | replace: 'option:', '' | downcase %}
                            {% assign value_handle = value.value | downcase %}
                            <button type="button" role="checkbox"{% if value.selected %} aria-checked="true" class="checked"{% else %} aria-checked="false"{% endif %} data-fid="{{filter.id}}" data-fvalue="{{value.value | escape}}"  title="{{value_label}}">
                            {% if swatches[attribute] and swatches[attribute][value_handle] %}
                                {% if swatches[attribute][value_handle].mode == 1 %}
                                <span class="gf-option-one-color" style="background-color:{{ swatches[attribute][value_handle].color_1 }}"></span>{% if filter.style contains 'Swatch - Text' %} <span class="gf-label">{{value_label}}</span>{% endif %}
                                {% elsif swatches[attribute][value_handle].mode == 2 %}
                                <span class="gf-option-two-color" style="background-color:{{ swatches[attribute][value_handle].color_1 }}"><span class="bottom-color" style="border-bottom-color:{{ swatches[attribute][value_handle].color_2 }}"></span></span>{% if filter.style contains 'Swatch - Text' %} <span class="gf-label">{{value_label}}</span>{% endif %}
                                {% elsif swatches[attribute][value_handle].mode == 3 %}
                                <span class="gf-swatch-image" style="background-image: url('{{ swatches[attribute][value_handle].image }}');background-color: {{ value.value | escape }}"></span>{% if filter.style contains 'Swatch - Text' %} <span class="gf-label">{{value_label}}</span>{% endif %}
                                {% endif %}
                            {% else %}
                                {% assign value_handle = value.value | handle %}
                                {% assign value_jpg    = value_handle | append: '.jpg' %}
                                {% assign value_png    = value_handle | append: '.png' %}
                                {% assign value_jpeg   = value_handle | append: '.jpeg' %}
                                {% assign has_swatch   = false %}
                                {% capture background_image_css %}
                                {% if images contains value_jpg %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value_jpg | asset_img_url: '50x' | prepend: 'https:' }}');
                                {% elsif images contains value_png %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value_png | asset_img_url: '50x' | prepend: 'https:' }}');
                                {% elsif images contains value_jpeg %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value_jpeg | asset_img_url: '50x' | prepend: 'https:' }}');
                                {% elsif value.value contains 'https:' or value.value contains 'http:' %}
                                    {% assign has_swatch = true %}
                                    background-image: url('{{ value.value }}');  
                                {% endif %}
                                background-color: {{ value.value | replace:"\\", "\\\\" | replace:"\'", "\\\'" | escape }};
                                {% endcapture %}
                                {% if has_swatch %}
                                <span class="gf-swatch-image" style="{{background_image_css}}"></span>
                                {% if filter.style contains 'Swatch - Text' %} 
                                    <span class="gf-label">{{value_label}}</span>
                                {% endif %}
                                {% elsif value.label contains "#" and value.label.size == 7 %}
                                <span class="gf-option-one-color" style="background-color:{{ value.label }}"></span>
                                {% else %}
                                <span class="gf-option-value">{{value_label}}</span>
                                {% endif %}
                            {% endif %}
                            </button>
                        {% endif %}
                        </li>
                    {% endfor %}
                    {% if filter.style == 'Swatch' %}
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    <li class="hidden-box"><a><span class="gf-swatch-image"></span></a></li>
                    {% endif %}
                    {% endif %}
                </ul>
                {% endif %}
            </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    {% endif %}
    </div>
    {% endif %}

    <div class="gf-filter-footer{% if settings.layout == 2 %} visible-sm{% endif %}">
    {% assign plurality = translation.search.products | default: "Products" %}
    {% assign singular = translation.search.product | default: "Product" %}
    <button type="button" onclick="globofilter.toggleCanvas()">{{ translation.filter.view | default: "View"}} <b>{{pagination.total}}</b> {{pagination.total | pluralize: singular, plurality}}</button>
    </div>
    {% endraw %}
