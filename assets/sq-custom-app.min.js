var se=Object.defineProperty;var le=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var E=(e,t,r)=>(le(e,typeof t!="symbol"?t+"":t,r),r);import{d as B,r as C,o as x,a as ae,b as L,c as k,e as W,n as N,S as re,f as ie,g as oe,w as j,t as ne,u as q,h as w,i as P,j as T,v as ce,k as D,l as I,m as de,F as Y,p as ue,q as fe,s as M,x as J,y as pe,z as he,A as ge}from"./sq-custom-common.min.js";const ve=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};ve();class X{static log(...t){console.log(...t)}static warn(...t){console.log(...t)}}const Z=B({__name:"SqDropdown",props:{height:{default:300},parent:null,openEvt:{default:"click"},closeEvt:{default:"click"},init:null},setup(e){const t=e,r=C([]),i=C(null),s=C(!1),o=C(!1),d=C(0),_=C(0),g=n=>{var a,f;const u=n.target;r.value.some(c=>c===u)||u===i.value||((a=i.value)==null?void 0:a.contains(u))||(o.value=!1,(f=i.value)==null||f.classList.remove("sq-opened"),i.value&&(i.value.style.maxHeight="",i.value.style.opacity=""))},v=n=>{var f;const a=n.currentTarget.getBoundingClientRect();!a||(o.value=!0,(f=i.value)==null||f.classList.add("sq-opened"),d.value=a.bottom,_.value=a.left,t.init&&!s.value&&(t.init(),s.value=!0))};return x(()=>{const n=document.querySelectorAll(t.parent);if(r.value=Array.from(n).map(u=>u),r.value.length===0){X.warn("Invalid Parent for Tooltip");return}r.value.forEach(u=>{u==null||u.addEventListener(t.openEvt,v),u==null||u.addEventListener(t.closeEvt,g)}),document.addEventListener("click",g,!0)}),ae(()=>{r.value.forEach(n=>{n==null||n.removeEventListener(t.openEvt,v),n==null||n.removeEventListener(t.closeEvt,g)}),document.removeEventListener("click",g,!0)}),(n,u)=>(L(),k("div",{class:N(["sq-dropdown-body",{"sq-opened":o.value}]),ref_key:"dropdown",ref:i},[W(n.$slots,"default")],2))}});class V{}E(V,"ThrottleSpeed",300),E(V,"DefaultPageSize",12),E(V,"DefaultFacetCount",100);var $=(e=>(e[e.MultiSelect=1]="MultiSelect",e[e.ColorList=2]="ColorList",e[e.StarRating=3]="StarRating",e[e.DynamicRangeSlider=4]="DynamicRangeSlider",e[e.SingleSelect=5]="SingleSelect",e[e.ColorSwatch=6]="ColorSwatch",e[e.RangeSlider=7]="RangeSlider",e[e.Pill=8]="Pill",e))($||{}),R=(e=>(e[e.Count=1]="Count",e[e.Alphabet=2]="Alphabet",e[e.Manual=3]="Manual",e[e.AlphabetReverse=4]="AlphabetReverse",e))(R||{});class me{static parseFilters(t,r){let i=t.textFacets;return Object.keys(i).forEach(s=>{let o=r.filter(d=>d.stFieldName===s);!o.length||o.forEach(d=>{var n,u,a,f,c;let _=i[d.stFieldName],g=(u=(n=d.items)==null?void 0:n.filter(l=>l.selected))!=null?u:[],v=(f=(a=d.items)==null?void 0:a.filter(l=>!l.isVisible))!=null?f:[];_.forEach(l=>{var p,m;l.displayLabel=l.label,l.isVisible=(m=(p=v.find(b=>b.label===l.label))==null?void 0:p.isVisible)!=null?m:!0,g.findIndex(b=>b.label===l.label)>-1&&(l.selected=!0)}),g.forEach(l=>{_.findIndex(p=>p.label===l.label)===-1&&_.push({label:l.label,value:0,selected:!0,displayLabel:l.label,isVisible:!0})}),(c=d.ignoreFilterValues)!=null&&c.length&&(_=_.filter(l=>!d.ignoreFilterValues.some(p=>l.label.toLowerCase().trim()===p.trim().toLowerCase()))),d.items=_})}),r}}class K{constructor(){E(this,"appStore",z());E(this,"st",new re(this.appStore.searchConfig.appId,this.appStore.searchConfig.searchToken))}getSearchClient(t="",r,i=!1){var n,u;if(i)return this.st.filter(""),this.st;let s=(n=r==null?void 0:r.defaultFilter)!=null?n:"",o=this.appStore.config.ignoreTags;const d=(u=this.appStore.filters)==null?void 0:u.filter(a=>{var f,c;return!a.isNumericFilter&&((f=a.conditionType)==null?void 0:f.includes("AND"))&&((c=a.items)==null?void 0:c.some(l=>l.selected))});let _="";d!=null&&d.length&&(_=d.map(f=>f.items.filter(l=>l.selected).map(l=>`${f.stFieldName} = "${l.label}"`).join(" AND ")).join(" AND "));let g="";o!=null&&o.length&&(g=o.map(a=>`NOT tags = "${a.trim()}"`).join(" AND "));let v=[t,_,g,s].filter(Boolean).join(" AND ");return this.appStore.config.hideOutOfStockItems==="true"&&(v=v.concat(`${v?" AND ":""}in_stock = 1`)),r!=null&&r.enableFacets&&(this.appStore.filters.filter(a=>!a.isNumericFilter&&a.stFieldName!=="average_rating").forEach(a=>{this.st.textFacets(a.stFieldName)}),this.appStore.filters.filter(a=>!a.isNumericFilter&&a.stFieldName!=="average_rating").forEach(a=>{var c;const f=(c=a.items)==null?void 0:c.filter(l=>l.selected);f!=null&&f.length&&this.st.textFacetFilters(a.stFieldName,f.map(l=>l.label))})),this.st.filter(v),this.st}}class U{static replaceSpecialChars(t){return t.replace(/[^\w\s]/gi,"_").replace(/\s+/g,"_")}static cancellablePromise(t){let r=!1;return{promise:new Promise((s,o)=>{t.then(d=>r?o({isCancelled:!0}):s(d),d=>o(r?{isCancelled:!0}:d))}),cancel:()=>{r=!0}}}}const z=ie({id:"appStore",state:()=>({filter:"",results:[],currentPage:1,pageSize:12,query:"",isLoading:!0,searching:!1,custom:{},config:{},searchConfig:{},_r:{},filters:[],sort:"",searchAborted:!1,searchFailed:!1,currentSearch:null}),getters:{},actions:{async search(e={appendResults:!1,restrictByCollection:!0}){var r,i;if(performance.mark("appstore.search.init"),!this.searchConfig.appId||!this.searchConfig.searchToken||!this.searchConfig.collectionId)throw new Error("Invalid parameters to complete a search");e=e||{restrictByCollection:!0},e.page&&e.page>0&&(this.currentPage=e.page),e.restrictByCollection==null&&(e.restrictByCollection=!0),e.enableFacets=this.searchConfig.enableFacets,e.defaultFilter=this.searchConfig.defaultFilter,e.searchFields=this.searchConfig.searchFields||this.config.searchFields,e.pageSize=(r=e.pageSize)!=null?r:this.searchConfig.pageSize,this.isLoading=!0,this.currentSearch&&((i=this.currentSearch)==null||i.cancel());const t=new K().getSearchClient(this.filter,e,!1);t.skip((this.currentPage-1)*e.pageSize).count(e.pageSize).searchFields(...e.searchFields),performance.mark("appstore.search.start"),this.currentSearch=U.cancellablePromise(t.search(this.query,this.searchConfig.collectionId));try{this._r=await this.currentSearch.promise,this.filters=me.parseFilters(this._r,this.filters),performance.mark("appstore.search.complete"),performance.mark("appstore.search.end")}catch(s){s.isCancelled?(X.warn("Search was aborted"),this.searchAborted=!0):this.searchFailed=!0}finally{this.isLoading=!1,this.currentSearch=null}},facetSearch:async function(e,t){return this.filters.find(o=>o.stFieldName===t)?(await new K().getSearchClient("",void 0,!0).facetSearch(this.query,t,e,V.DefaultFacetCount,this.searchConfig.collectionId)).results:[]}}});class _e{constructor(){E(this,"store",z())}setup(){this.setupFilters()}setupFilters(){this.store.filters=this.store.config.filters.map(t=>(t.isVisible=!0,Object.assign({},t)))}}const ee=B({__name:"SqConfig",props:{appId:null,searchToken:null,collectionId:null,enableFacets:{type:Boolean,default:!0},defaultFilter:{default:`priorityScore >= 0 AND publishedTimestamp < ${Date.now()} AND publishedTimestamp > 0`},searchFields:null,pageSize:null},setup(e){const t=e,r=z();return x(()=>{var s,o,d;const i=window.sq.config;if(!i)throw new Error("Missing Config File, please check");r.config=i,r.searchConfig={appId:(s=t.appId)!=null?s:i.appId,searchToken:(o=t.searchToken)!=null?o:i.searchToken,collectionId:(d=t.collectionId)!=null?d:i.productCollectionId,enableFacets:t.enableFacets,defaultFilter:t.defaultFilter,searchFields:t.searchFields||i.searchFields,pageSize:t.pageSize||i.themeSettings.countOfProductsShown},new _e().setup()}),(i,s)=>null}});var H=(e,t)=>{const r=e.__vccOpts||e;for(const[i,s]of t)r[i]=s;return r};const be={key:0,class:"sq-filter"},Se={class:"sq-filter-searchbox"},ye=["placeholder"],Ce=["onClick"],Fe={key:0,class:"sq-filter-value-count"},we=B({__name:"SqFilter",props:{facet:null,uniqueId:null,transform:{type:Function},disabled:{type:Boolean}},setup(e){const t=e,r=C(""),i=z(),s=C(),o=C(null),d=C(!1),_=c=>{var l,p,m,b,h;try{let S=[],F=[],Q=[];return(l=s.value)!=null&&l.reorderSelectedValues?(S=c.filter(y=>y==null?void 0:y.selected),F=c.filter(y=>!y.selected)):(S=[],F=c),((p=s.value)==null?void 0:p.sortType)===R.Manual&&((m=s.value)==null?void 0:m.tags.length)?(S=g(S),F=g(F)):((b=s.value)==null?void 0:b.sortType)===R.Alphabet?(S==null||S.sort((y,A)=>y.label.localeCompare(A.label,void 0,{numeric:!0})),F==null||F.sort((y,A)=>y.label.localeCompare(A.label,void 0,{numeric:!0}))):((h=s.value)==null?void 0:h.sortType)===R.AlphabetReverse&&(S==null||S.sort((y,A)=>y.label.localeCompare(A.label,void 0,{numeric:!0})).reverse(),F==null||F.sort((y,A)=>y.label.localeCompare(A.label,void 0,{numeric:!0})).reverse()),Q=S==null?void 0:S.concat(F),Q}catch(S){return console.error("Error sorting items:",S),[]}},g=c=>{var p;let l=[];try{(p=s.value)==null||p.tags.forEach(m=>{if(c!=null&&c.some(b=>b.label.trim().toLowerCase()===m.trim().toLowerCase())){let b=c.find(h=>h.label.trim().toLowerCase()===m.trim().toLowerCase());b&&l.push(b)}})}catch(m){console.error("Error in getManualSortedArray:",m)}return l},v=oe(()=>{var c,l;try{const p=_((l=(c=s.value)==null?void 0:c.items)!=null?l:[]).filter(m=>m.isVisible);return t.transform?t.transform(p):p}catch(p){return console.error("Error computing items:",p),[]}});x(()=>{try{s.value=t.uniqueId?i.filters.find(c=>c.uniqueId===t.uniqueId):i.filters.find(c=>c.stFieldName===t.facet),o.value=v.value.find(c=>c.selected)||null}catch(c){console.error("Error during onMounted:",c)}}),j(v,c=>{try{o.value=c.find(l=>l.selected)||null}catch(l){console.error("Error watching items:",l)}},{deep:!0});const n=()=>{},u=c=>{var l;try{((l=s.value)==null?void 0:l.userInterfaceType)===$.SingleSelect?(v.value.forEach(p=>{p.selected=p.label===c.label}),o.value=c):(c.selected=!c.selected,o.value=v.value.find(p=>p.selected)||null),i.search({page:1}),d.value=!1}catch(p){console.error("Error selecting item:",p)}},a=()=>{t.disabled||(d.value=!d.value)},f=ne(V.ThrottleSpeed,async()=>{var c,l,p;try{const m=await i.facetSearch(r.value,(c=s.value)==null?void 0:c.stFieldName);if(!r.value.trim()){(l=s.value)==null||l.items.forEach(h=>h.isVisible=!0);return}const b=m.map(h=>h.label);(p=s.value)==null||p.items.forEach(h=>{h.selected||b.indexOf(h.label)>-1?h.isVisible=!0:h.isVisible=!1})}catch(m){console.error("Error searching filter values:",m)}});return(c,l)=>{var p,m;return((p=s.value)==null?void 0:p.isVisible)&&!(s.value.hideSingleValues&&q(v).length===1)?(L(),k("div",be,[w("div",{class:N(`sq-filter-select-container ${s.value.stFieldName}`),ref:"dropdownParent"},[w("div",{class:N(["sq-filter-select",{disabled:t.disabled}]),onClick:a},[w("span",null,P(((m=o.value)==null?void 0:m.displayLabel)||`${s.value.displayName}`),1)],2),T(D(Z,{parent:`.sq-filter-select-container.${s.value.stFieldName}`,id:s.value.stFieldName,init:n,"open-evt":"click","close-evt":"click",class:N({"sq-opened":d.value&&!t.disabled}),style:pe({maxHeight:`${d.value&&!t.disabled?"300":"0"}px`,opacity:d.value&&!t.disabled?1:0})},{default:I(()=>{var b;return[w("div",Se,[T(w("input",{"onUpdate:modelValue":l[0]||(l[0]=h=>r.value=h),type:"text",autocomplete:"off",class:"sq-filter-input",placeholder:`${(b=s.value)==null?void 0:b.displayName.toLowerCase()}`,onInput:l[1]||(l[1]=(...h)=>q(f)&&q(f)(...h))},null,40,ye),[[de,r.value]])]),(L(!0),k(Y,null,ue(q(v),h=>(L(),k("div",{key:h.label,class:N(["sq-filter-item sq-block",{"sq-active":h.selected}])},[w("label",{class:N(["sq-filter-value",[{"sq-single-select":s.value.userInterfaceType===q($).SingleSelect},{"sq-multi-select":s.value.userInterfaceType===q($).MultiSelect},{"sq-pill":s.value.userInterfaceType===q($).Pill},{"sq-active":h.selected},q(U).replaceSpecialChars(h.label)]]),onClick:fe(S=>u(h),["prevent"])},[w("span",{class:N(["sq-cb",{"sq-active":h.selected}])},null,2),M(" "+P(h.displayLabel)+" ",1),s.value.isQuantityEnabled?(L(),k("span",Fe,"["+P(h.value)+"]",1)):J("",!0)],10,Ce)],2))),128))]}),_:1},8,["parent","id","class","style"]),[[ce,d.value&&!t.disabled]])],2)])):J("",!0)}}});var O=H(we,[["__scopeId","data-v-38dc9800"]]);const qe=B({__name:"SqClear",props:{facet:null},emits:["clear"],setup(e,{emit:t}){const r=e,i=z(),s=()=>{var d,_;let o=i.filters;r.facet&&(o=(_=(d=i.filters)==null?void 0:d.filter(g=>g.stFieldName===r.facet))!=null?_:[]),o.forEach(g=>{var v;g.isNumericFilter&&g.userInterfaceType!==$.MultiSelect&&(g.range=[],g.items=[]),(v=g.items)==null||v.forEach(n=>{n.selected&&(n.selected=!1)})}),i.search({page:1}),t("clear")};return(o,d)=>(L(),k("div",{class:"sq-clear",onClick:s},[W(o.$slots,"default",{},()=>[M("Clear")],!0)]))}});var te=H(qe,[["__scopeId","data-v-18ce0952"]]);const Ne={class:"sq-home"},Le={class:"sq-filter-group sq-topbar"},ke={class:"sq-socks"},Ae=B({__name:"SqFilterApp",setup(e){const t=z(),r=C(!1),i=C(!0),s=C(!0),o=n=>new Promise(u=>setTimeout(u,n));x(async()=>{try{await t.search({page:1})}catch(n){console.error("Error during initial search:",n)}}),j(()=>{var n,u;return(u=(n=t.filters.find(a=>a.stFieldName==="tags_brand_u7o52s8y6lzdgk23zhoyn81w"))==null?void 0:n.items)==null?void 0:u.some(a=>a.selected)},async n=>{await o(800),i.value=!n,n||(s.value=!0)}),j(()=>{var n,u;return(u=(n=t.filters.find(a=>a.stFieldName==="tags_model_yid1zsi8u8ok6nozp2vb5zg9"))==null?void 0:n.items)==null?void 0:u.some(a=>a.selected)},async n=>{await o(800),s.value=!n});const d=async()=>{var u,a;await o(800),((a=(u=t.filters.find(f=>f.stFieldName==="tags_brand_u7o52s8y6lzdgk23zhoyn81w"))==null?void 0:u.items)==null?void 0:a.find(f=>f.selected))?i.value=!1:(i.value=!0,s.value=!0)},_=async()=>{var u,a;await o(800);const n=(a=(u=t.filters.find(f=>f.stFieldName==="tags_model_yid1zsi8u8ok6nozp2vb5zg9"))==null?void 0:u.items)==null?void 0:a.find(f=>f.selected);s.value=!n},g=()=>{var c;if(!t.filters){console.error("Store filters are undefined");return}const n=t.filters.map(l=>{if(!l.items)return null;const p=l.items.find(m=>m.selected);return p?`${l.stFieldName}=${p.label}`:null}).filter(Boolean).join("&"),u=((c=window.Shopify)==null?void 0:c.locale)||"en",f=`${u==="en"?"search":`${u}/search`}?${n}`;console.log("Navigating to URL:",f),window.location.href=f},v=()=>{i.value=!0,s.value=!0};return(n,u)=>(L(),k(Y,null,[D(ee,{"app-id":"WWHVLJUE9GEDQYI9XN1LD5DK","collection-id":"MLLQGSCV3BLNBQDNGA4PSFAN","search-token":"F1JB7PN3KKUMVP1JHR6JEUY5"}),w("div",Ne,[w("div",Le,[D(O,{facet:"tags_brand_u7o52s8y6lzdgk23zhoyn81w",disabled:r.value,onChange:d},{tpl:I(a=>[M(P(a.displayLabel),1)]),_:1},8,["disabled"]),D(O,{facet:"tags_model_yid1zsi8u8ok6nozp2vb5zg9",disabled:i.value,onChange:_},{tpl:I(a=>[M(P(a.displayLabel),1)]),_:1},8,["disabled"]),D(O,{facet:"tags_model_cx9fhj5cuqpozs1ac828aoho",disabled:s.value},{tpl:I(a=>[M(P(a.displayLabel),1)]),_:1},8,["disabled"])]),w("div",ke,[w("button",{class:"sq-button",onClick:g},"Search"),D(te,{onClear:v})])])],64))}});var Ee=H(Ae,[["__scopeId","data-v-45154058"]]);const ze=B({__name:"SqCb",props:{selected:{type:Boolean}},setup(e){const t=e;return(r,i)=>(L(),k("span",{class:N(["sq-cb",{"sq-active":t.selected}])},null,2))}});performance.mark("start");const De=()=>{const e=he({components:{"sq-config":ee,"sq-filter":O,"sq-cb":ze,"sq-filter-app":Ee,"sq-dropdown":Z,"sq-clear":te}});return e.use(ge()),z(),e.config.performance=!0,e.config.globalProperties.window=window,e},G=()=>{document.querySelectorAll(".sq-custom-app").forEach(t=>{De().mount(t)}),performance.mark("mounted")};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",G):G();
